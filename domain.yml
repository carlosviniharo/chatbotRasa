version: "3.1"

intents:
  - start_conversation
  - inform_identity
  - choose_option
  - affirm
  - deny
  - loan_info
  - inform_fullname
  - inform_city
  - inform_phone
  # - inform_email
  # - open_account
  - goodbye

entities:
  - identity
  - option
  - disclosure
  - loan_type
  - fullname
  - city
  - phone
  # - email


forms:

  # identity_form:
  #   required_slots:
  #   - identity

  client_data_form:
    required_slots:
      - fullname
      - city
      - phone
      # - email

slots:
  identity:
    type: float
    mappings:
      - type: from_entity
        entity: identity
    # influence_conversation: false

  option:
    type: text
    mappings:
      - type: from_entity
        entity: option

  disclosure:
    type: bool
    mappings:
      - type: from_intent
        intent: affirm
        value: true
      - type: from_intent
        intent: deny
        value: false

  loan_type:
    type: float
    mappings:
      - type: from_intent
        intent: affirm
        value: 1
      - type: from_intent
        intent: deny
        value: 2

  fullname:
    type: text
    mappings:
      - type: from_entity
        entity: fullname

  city:
    type: text
    mappings:
      - type: from_entity
        entity: city

  phone:
    type: float
    mappings:
      - type: from_entity
        entity: phone

  # email:
  #   type: text
  #   mappings:
  #     - type: from_entity
  #       entity: email

responses:
  utter_start_conversation:
    - text: | 
        ¬°Hola! Bienvenido/@ üòä Gracias por comunicarte con la Cooperativa de Ahorro y Cr√©dito Pilahuin Tio Ltda. 
        La Cooperativa Que Cree En Su Gente.
        Soy PTIO su asistente virtual üß°üñ§

  utter_ask_identity:
    - text: "Antes de comenzar me puedes brindar tu n√∫mero de identificaci√≥n (e.g., 1004150883)."

  utter_disclaimer:
    - text: |
        Al utilizar este canal digital autorizas a la Cooperativa de Ahorro y Cr√©dito Pilahuin Tio Ltda. a acceder a tus datos personales 
        para la gesti√≥n de requerimientos y consultas en general. Para m√°s informaci√≥n sobre los t√©rminos y condiciones visita 
        https://www.pilahintio.com.ec/terminos-y-condiciones
        ¬øAceptas los t√©rminos y condiciones?

  utter_services:
    - text: |
        ¬øEn qu√© le podemos ayudar?
        - Inversiones
        - Cr√©ditos
        - Aperturas de Cuentas
        - Otro

  utter_loans:
    - text: |
        Le ofrecemos las siguientes opciones de asistencia con respecto a pr√©stamos:
          1 - Informaci√≥n sobre sus cr√©ditos actuales.
          2 - Solicitar un nuevo cr√©dito.

  # utter_investments:
  #   - text: |
  #       Le ofrecemos las siguientes opciones de asistencia con respecto a inversiones:

  # utter_accounts:
  #   - text: |
  #       Le ofrecemos las siguientes opciones de asistencia con respecto a cuentas:

  utter_ask_fullname:
    - text:  |
        Por favor, para acceder a la informaci√≥n ser√≠a tan amable de brindarme sus nombres y apellidos tal y como aparecen en su c√©dula
        (e.g. Juan Alexander Mazabanda Momposita)

  utter_ask_city:
    - text: "Por favor, la ciudad de donde se comunica"

  utter_ask_phone:
    - text: "Por favor, para acceder a la informaci√≥n ser√≠a tan amable de brindarme su n√∫mero de tel√©fono"

  # utter_ask_email:
  #   - text: "Por favor, su correo electr√≥nico"

  utter_submit:
    - text: "¬°Tenemos tus datos!"

  utter_slots_values:
    - text: |
        Los datos ingresados son los siguientes:
        - Nombres Completos: {fullname}
        - Lugar de donde se comunica: {city}
        - N√∫mero telef√≥nico: {phone}
    # - Correo electr√≥nico: {email}

  utter_ask_rephrase:
    - text: "Ups tu ultimo mensaje no lo pude entender, podrias por favor volve a intentarlo"

  utter_goodbye:
    - text: "Adi√≥s, ¬°que tengas un buen d√≠a!"

actions:
  - action_show_identity
  - action_end_conversation
  - action_validate_id
  - action_show_option

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
